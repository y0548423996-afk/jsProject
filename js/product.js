let products = [
    {
        textImg: '../pics/homeJob/1.jpeg',
        name: "PressMate – Smart Ironing Assistant",
        description: "Meet PressMate – your wrinkle-fighting companion!",
        price: 1000000,
        code: '1',
        kategory: 'houseJobs',
        amount: 1,
        pics: [
            '../pics/show/m1.jpeg',
           '../pics/show/m2.jpeg',
           '../pics/show/m3.jpeg',
           '../pics/show/m4.jpeg'
        ]
    },
    {
        textImg: '../pics/homeJob/2.jpeg',
        name: 'DishBot',
        description: 'Efficiently washes your dishes, saving you time and effort.',
        price: 200500000,
        code: '2',
        kategory: 'houseJobs',
        amount: 1,
        pics: [
             '../pics/show/s1.jpeg',
           '../pics/show/s2.jpeg',
           '../pics/show/s3.jpeg',
           '../pics/show/s4.jpeg'
        ]
    },
    {
        textImg: '../pics/homeJob/3.jpeg',
        name: 'ChefRobo',
        description: 'Prepares meals quickly and precisely for your busy lifestyle.',
        price: 30058000,
        code: '3',
        kategory: 'houseJobs',
        amount: 1,
        pics: ['../pics/homeJob/3.jpeg',
            '../pics/homeJob/3.jpeg',
            '../pics/homeJob/3.jpeg',
            '../pics/homeJob/3.jpeg',
        ]
    },
    {
        textImg: '../pics/homeJob/4.jpeg',
        name: 'DeepCleanBot',
        description: 'Thoroughly cleans floors, reaching every corner and crevice.',
        price: 510000,
        code: '4',
        kategory: 'houseJobs',
        amount: 1,
        pics: [
            '../pics/show/c1.jpeg',
           '../pics/show/c2.jpeg',
           '../pics/show/c1.jpeg',
           '../pics/show/c2.jpeg'
        ]
    },
    {
        textImg: '../pics/homeJob/5.jpeg',
        name: 'EasySweep',
        description: 'Light floor cleaner for everyday quick touch-ups.',
        price: 1020000,
        code: '5',
        kategory: 'houseJobs',
        amount: 1,
        pics: ['../pics/homeJob/5.jpeg',
            '../pics/homeJob/5.jpeg',
            '../pics/homeJob/5.jpeg',
            '../pics/homeJob/5.jpeg',
             ]
        
    },
    {
        textImg: '../pics/homeJob/6.jpeg',
        name: 'Light floor cleaner',
        description: 'a gentle and effective solution that leaves floors shiny and fresh with no residue.',
        price: 850000,
        code: '6',
        kategory: 'houseJobs',
        amount: 1,
        pics: [
             '../pics/show/f1.jpeg',
           '../pics/show/f2.jpeg',
           '../pics/show/f1.jpeg',
           '../pics/show/f2.jpeg'
        ]
    },
    {
        textImg: '../pics/errands/7.jpeg',
        name: 'Childcare Guardian',
        description: 'Watches over children attentively in a daycare setting.',
        price: 980000,
        code: '7',
        kategory: 'errands',
        amount: 1,
        pics: ['../pics/errands/7.jpeg',
        '../pics/errands/7.jpeg',
        '../pics/errands/7.jpeg',
        '../pics/errands/7.jpeg',]
    },
    {
        textImg: '../pics/errands/8.jpeg',
        name: 'Kindergarten Pickup',
        description: 'Picks up children from kindergarten with care.',
        price: 1310000,
        code: '8',
        kategory: 'errands',
        amount: 1,
        pics: ['../pics/errands/8.jpeg',
        '../pics/errands/8.jpeg',
        '../pics/errands/8.jpeg',
        '../pics/errands/8.jpeg',]
    },
    {
        textImg: '../pics/errands/9.jpeg',
        name: 'Trash Disposal',
        description: 'Responsibly takes out the garbage.',
        price: 690000,
        code: '9',
        kategory: 'errands',
        amount: 1,
        pics: [
            '../pics/show/z1.jpeg',
           '../pics/show/z2.jpeg',
           '../pics/show/z3.jpeg',
           '../pics/show/z3.jpeg'  
        ]
    },
    {
        textImg: '../pics/errands/10.jpeg',
        name: 'Driver',
        description: 'Drives children or family members safely to destinations.',
        price: 1460000,
        code: '10',
        kategory: 'errands',
        amount: 1,
        pics: [
             '../pics/show/n1.jpeg',
           '../pics/show/n2.jpeg',
           '../pics/show/n1.jpeg',
           '../pics/show/n3.jpeg'
        ]
    },
    {
        textImg: '../pics/errands/11.jpeg',
        name: 'Clothes Shopping',
        description: 'Shops for clothes and selects stylish, suitable outfits.',
        price: 580000,
        code: '11',
        kategory: 'errands',
        amount: 1,
        pics: ['../pics/errands/11.jpeg',
            '../pics/errands/11.jpeg',
            '../pics/errands/11.jpeg',
            '../pics/errands/11.jpeg',
        ]
    },
    {
        textImg: '../pics/errands/12.jpeg',
        name: 'Digital Shopping',
        description: 'Makes online purchases quickly and efficiently.',
        price: 1120000,
        code: '12',
        kategory: 'errands',
        amount: 1,
        pics: [
             '../pics/show/o1.jpeg',
           '../pics/show/o2.jpeg',
           '../pics/show/o3.jpeg',
           '../pics/show/o4.jpeg'
        ]
    },
    {
        textImg: '../pics/errands/13.jpeg',
        name: 'Grocery Shopping',
        description: 'Buys fresh groceries and household essentials.',
        price: 660000,
        code: '13',
        kategory: 'errands',
        amount: 1,
        pics: ['../pics/errands/13.jpeg',
        '../pics/errands/13.jpeg',
        '../pics/errands/13.jpeg',
        '../pics/errands/13.jpeg',]
    },
    {
        textImg: '../pics/errands/14.jpeg',
        name: 'Child Supervisor',
        description: 'Closely supervises and entertains children at home.',
        price: 780000,
        code: '14',
        kategory: 'errands',
        amount: 1,
        pics: ['../pics/errands/14.jpeg',
            '../pics/errands/14.jpeg',
            '../pics/errands/14.jpeg',
            '../pics/errands/14.jpeg',
        ]
    },
    {
        textImg: '../pics/errands/15.jpeg',
        name: 'Trip Organizer',
        description: 'Takes children on fun and organized trips.',
        price: 900000,
        code: '15',
        kategory: 'errands',
        amount: 1,
        pics: [
            '../pics/errands/15.jpeg',
            '../pics/errands/15.jpeg',
'../pics/errands/15.jpeg',
'../pics/errands/15.jpeg',
        ]
    },
    {
        textImg: '../pics/emotional/16.jpeg',
        name: '',
        description: '',
        price: 660100,
        code: '16',
        kategory: 'emotional',
        amount: 1,
        pics: ['../pics/emotional/16.jpeg',
            '../pics/emotional/16.jpeg',
            '../pics/emotional/16.jpeg',
            '../pics/emotional/16.jpeg',

        ]
    },
    {
        textImg: '../pics/emotional/17.jpeg',
        name: '',
        description: '',
        price: 660300,
        code: '17',
        kategory: 'emotional',
        amount: 1,
        pics: [
            '../pics/emotional/17.jpeg',
            '../pics/emotional/17.jpeg',
            '../pics/emotional/17.jpeg',
            '../pics/emotional/17.jpeg',
        ]
    },
    {
        textImg: '../pics/emotional/18.jpeg',
        name: '',
        description: '',
        price: 660500,
        code: '18',
        kategory: 'emotional',
        amount: 1,
        pics: [
            '../pics/emotional/18.jpeg',
            '../pics/emotional/18.jpeg',
            '../pics/emotional/18.jpeg',
            '../pics/emotional/18.jpeg',
]
    },
    {
        textImg: '../pics/emotional/19.jpeg',
        name: '',
        description: '',
        price: 660700,
        code: '19',
        kategory: 'emotional',
        amount: 1,
        pics: ['../pics/emotional/19.jpeg',
            '../pics/emotional/19.jpeg',
            '../pics/emotional/19.jpeg',
            '../pics/emotional/19.jpeg',
        ]

    },
    {
        textImg: '../pics/emotional/20.jpeg',
        name: '',
        description: '',
        price: 660900,
        code: '20',
        kategory: 'emotional',
        amount: 1,
        pics: ['../pics/emotional/20.jpeg',
            '../pics/emotional/20.jpeg',
            '../pics/emotional/20.jpeg',
            '../pics/emotional/20.jpeg',
        ]

    },
    {
        textImg: '../pics/emotional/21.jpeg',
        name: '',
        description: '',
        price: 661100,
        code: '21',
        kategory: 'emotional',
        amount: 1,
        pics: [
            '../pics/emotional/21.jpeg',
            '../pics/emotional/21.jpeg',
            '../pics/emotional/21.jpeg',
            '../pics/emotional/21.jpeg',
        ]
    },
    {
        textImg: '../pics/study help/22.jpeg',
        name: '',
        description: '',
        price: 661300,
        code: '22',
        kategory: 'StudyHelp',
        amount: 1,
        pics: ['../pics/study help/22.jpeg',
            '../pics/study help/22.jpeg',
            '../pics/study help/22.jpeg',
            '../pics/study help/22.jpeg',

        ]
    },
    {
        textImg: '../pics/study help/23.jpeg',
        name: '',
        description: '',
        price: 661500,
        code: '23',
        kategory: 'StudyHelp',
        amount: 1,
        pics: [
'../pics/study help/23.jpeg',            
'../pics/study help/23.jpeg',
'../pics/study help/23.jpeg',
'../pics/study help/23.jpeg',
        ]
    },
    {
        textImg: '../pics/study help/24.jpeg',
        name: '',
        description: '',
        price: 661700,
        code: '24',
        kategory: 'StudyHelp',
        amount: 1,
        pics: [
'../pics/study help/24.jpeg',
'../pics/study help/24.jpeg',
'../pics/study help/24.jpeg',
'../pics/study help/24.jpeg',
 ]
    },
    {
        textImg: '../pics/study help/25.jpeg',
        name: '',
        description: '',
        price: 661900,
        code: '25',
        kategory: 'StudyHelp',
        amount: 1,
        pics: [
            '../pics/study help/25.jpeg',
            '../pics/study help/25.jpeg',
            '../pics/study help/25.jpeg',
            '../pics/study help/25.jpeg',
        ]
    },
    {
        textImg: '../pics/study help/26.jpeg',
        name: '',
        description: '',
        price: 662100,
        code: '26',
        kategory: 'StudyHelp',
        amount: 1,
        pics: [ '../pics/study help/26.jpeg',
             '../pics/study help/26.jpeg',
              '../pics/study help/26.jpeg',
               '../pics/study help/26.jpeg',

        ]
    },
    {
        textImg: '../pics/study help/27.jpeg',
        name: '',
        description: '',
        price: 662300,
        code: '27',
        kategory: 'StudyHelp',
        amount: 1,
        pics: [
'../pics/study help/27.jpeg',
'../pics/study help/27.jpeg',
'../pics/study help/27.jpeg',
'../pics/study help/27.jpeg',
 ]
    }
]



let newArr = []
let newJson = localStorage.getItem('details')
newArr.push(products)
//ממיר אוביקט למחרוזת כדי שיהיה אפשר להכניס אותו למחסנית
newJson = JSON.stringify(newArr)
localStorage.setItem('details', newJson)


function nextPage(value) {
    //לכאן נשלח הערך של מה שבחר ומעביר דף
    localStorage.setItem("chosenCategory", value);
    window.location.href = '../html/product1.html'
}


function create() {
    namee()
    let value = localStorage.getItem("chosenCategory");
    let contain = document.getElementsByTagName('section')[0]//זה הדיב שבתוכו כל המוצרים
    for (let i = 0; i < products.length; i++) {
        //בודק האם הקטרוגריה שלחצתי בדף הבית שווה אם כן תיצור את התמונה על המסך
        if (value == products[i].kategory || value == 'all') {
            //יוצר דיב שבתוך כל אחד נמצאים התמונה והמלל
            let d = document.createElement('div')
            
            //הוספת מאפיין
            d.setAttribute('code', i + 1)
            contain.appendChild(d)
            //מכניס לשם את התמונה
            let pic = document.createElement('img')
            pic.src = products[i].textImg
            d.appendChild(pic)
            pic.addEventListener('click', details_move);
            //מוסיף שם למוצר
            let name = document.createElement('p')
            name.innerText = products[i].name
            d.appendChild(name)
            name.addEventListener('click', details_move);
            //מוסיף תיאור למוצר
            // let description = document.createElement('p')
            // description.innerText = products[i].description
            // d.appendChild(description)
            //מוסיף מחיר למוצר
            let price = document.createElement('p')
            price.innerText = products[i].price+"$"
            d.appendChild(price)
            price.addEventListener('click', details_move);
   
  

// יצירת כפתור Add to cart עם מבנה דומה אך עם צבע רקע שונה (bg-2)
let buscate = document.createElement('button');
buscate.setAttribute('code', i+1);
buscate.classList.add('moving-border-wrapper');
let buscateMover = document.createElement('nav');
buscateMover.classList.add('moving-border-mover', 'bg-4');
buscate.appendChild(buscateMover);
let buscateContent = document.createElement('span');
buscateContent.classList.add('moving-border-content');
buscateContent.innerText = 'Add to cart';
buscate.appendChild(buscateContent);

buscate.addEventListener('click', baskatadd);
d.appendChild(buscate);


 
  
let heart = document.createElement('button');
heart.classList.add('heart');
heart.innerHTML = '<i class="fas fa-heart"></i>';
        
heart.addEventListener('click', function () {
  this.classList.toggle('fav');
});
d.appendChild(heart);



 }
}
}

function baskatadd() {
    //שומרים את הפריט שבחרתי במחסנית מקומית
    //כאן תפסנו את המספר שעל הכפתור הוספה לסל
    //עכשיו משווים את במספר שלו לאיפה שנמצא במערך
   showGlowingPopup()
 countt()



    let arr=[]
    let butt = event.target.parentElement
    let b = butt.getAttribute('code') - 1//המקום במערך
    /////הכנסה למחסנית
   
    let json = localStorage.getItem('robots:')
    if (json == null) {//המחסנית ריקה
      
        arr.push(products[b])//ממרי לאובייקט
        json = JSON.stringify(arr)//ממיר אובייקט למחרוזת
        localStorage.setItem('robots:', json)
    }
    else {
        //המרה של המערך לאובייקט
        arr = JSON.parse(json)
        //עכשיו בודקים האם יש כבר כזה מוצר
        let i = 0
        for (i = 0; i < arr.length; i++) {
            if (arr[i].code == products[b].code) {
                arr[i].amount++;
                break;
            }
        }
        if (i == arr.length)
            arr.push(products[b])
     let   json2= JSON.stringify(arr)//ממיר אובייקט למחרוזת
        localStorage.setItem('robots:', json2)
        

    }


}


function details_move() {
    //הפונקציה הזאת מקבלת את הקוד של התמונה שנלחצה 
    //ומכניס את הקוד למחסנית כדי ששם ידעו את מי ליצר
    
    let newArr1 = []
    let newJson1 = localStorage.getItem('code')
    let butt = event.target.parentElement
    let c = butt.getAttribute('code') - 1//המקום במערך
    newArr1.push(c)
    //ממיר אוביקט למחרוזת כדי שיהיה אפשר להכניס אותו למחסנית
    newJson1 = JSON.stringify(newArr1)
    localStorage.setItem('code', newJson1)

    window.location = '../html/details_product.html'
}




function showGlowingPopup() {
 const popup = document.createElement('artical');
      popup.className = 'popup-overlay';
      popup.innerHTML = `
        <div class="popup-box">
          <p>The product was successfully added to the cart!</p>
          <button class="popup-btn" onclick="this.closest('.popup-overlay').remove()">אישור</button>
        </div>
      `;
      document.body.appendChild(popup);

        setTimeout(() => {
        if (popup.parentNode) {
          popup.remove();
        }
      }, 1000);
}



function countt(){
     //////
                     //משנה במחסנית את כמות המוצרים הכלולים שנמצאים בסל

   let counter=localStorage.getItem('count')
let newArr3=JSON.parse(counter)
newArr3++

let goodcount=document.getElementById('cart-count')
    goodcount.style.display = "inline-block"; 
goodcount.innerText=newArr3

newArr3=JSON.stringify(newArr3)
localStorage.setItem('count', newArr3)

/////////
}